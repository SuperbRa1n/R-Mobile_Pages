import{s as t,E as a,j as e,c as s,w as l,b as i,o as c,a as u,x as o,y as n,t as m,v as d,F as f,h as r,e as p,A as _,i as D}from"./index-CQZovXBN.js";import{_ as h,v as y}from"./api.BbjEcOtK.js";const g=h({data:()=>({id:"",musicDetail:{}}),computed:{hasMultipleButtons(){return!(!this.musicDetail||!this.musicDetail.platform)&&(this.musicDetail.platform.netease&&this.musicDetail.platform.qq_music)}},methods:{formatDate(t){if(!t)return"未知";let a;if("string"==typeof t)if(t.includes("T")||t.includes("Z"))a=new Date(t);else{const e=t.replace(/-/g,"/");a=new Date(e)}else a=new Date(t);if(isNaN(a.getTime()))return console.warn("Invalid date:",t),t||"未知";return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`},async loadMusicDetail(s){try{t({title:"加载中...",mask:!0}),this.musicDetail=await y(s)}catch(l){a({title:"加载失败",icon:"none"})}finally{e()}},turnToNetease(){if(this.musicDetail&&this.musicDetail.platform&&this.musicDetail.platform.netease){const t="orpheus://song/"+this.musicDetail.platform.netease,a="https://music.163.com/#/song?id="+this.musicDetail.platform.netease;window.open(t),window.location.href!==t&&window.open(a)}else a({title:"暂无网易云音乐链接",icon:"none"})},turnToQQMusic(){if(this.musicDetail&&this.musicDetail.platform&&this.musicDetail.platform.qq_music){const t={song:[{type:"0",songmid:this.musicDetail.platform.qq_music}],action:"play"},a="qqmusic://qq.com/media/playSonglist?p="+encodeURIComponent(JSON.stringify(t)),e="https://y.qq.com/n/yqq/song/"+this.musicDetail.platform.qq_music+".html";window.open(a),window.location.href!==a&&window.open(e)}else a({title:"暂无QQ音乐链接",icon:"none"})}},onShareAppMessage(t){return{title:"亲爱的瑞秋-"+this.musicDetail.name,path:"/pages/musicDetail/musicDetail?id="+this.id}},onShareTimeline(){return{title:"亲爱的瑞秋-"+this.musicDetail.name,query:"id="+this.id}},onLoad(t){const{id:e}=t;this.id=e,e?this.loadMusicDetail(e):a({title:"缺少音乐ID",icon:"none"})}},[["render",function(t,a,e,h,y,g){const q=_,w=i,T=D;return c(),s(w,{class:"musicDetailContainer"},{default:l((()=>[y.musicDetail&&y.musicDetail.name?(c(),s(w,{key:1},{default:l((()=>[u(w,{class:"musicHeader"},{default:l((()=>[u(T,{src:y.musicDetail.cover_url.replace("http://","https://"),class:"musicCover",mode:"aspectFill"},null,8,["src"]),u(w,{class:"musicInfo"},{default:l((()=>[u(q,{class:"musicTitle"},{default:l((()=>[o(n(y.musicDetail.name),1)])),_:1}),u(q,{class:"musicAlbum"},{default:l((()=>[o(n(y.musicDetail.album),1)])),_:1}),u(q,{class:"musicArtist"},{default:l((()=>[o(n(y.musicDetail.solo),1)])),_:1}),u(q,{class:"musicDate"},{default:l((()=>[o(n(g.formatDate(y.musicDetail.publish_time)),1)])),_:1})])),_:1})])),_:1}),u(w,{class:"musicDetails"},{default:l((()=>[u(w,{class:"detailSection"},{default:l((()=>[u(q,{class:"sectionTitle"},{default:l((()=>[o("基本信息")])),_:1}),u(w,{class:"detailItem"},{default:l((()=>[u(q,{class:"detailLabel"},{default:l((()=>[o("音乐类型：")])),_:1}),u(q,{class:"detailValue"},{default:l((()=>[o(n(y.musicDetail.solo),1)])),_:1})])),_:1}),u(w,{class:"detailItem"},{default:l((()=>[u(q,{class:"detailLabel"},{default:l((()=>[o("平台：")])),_:1}),u(q,{class:"detailValue"},{default:l((()=>[o(n(y.musicDetail.platform&&y.musicDetail.platform.netease?y.musicDetail.platform.qq_music?"全平台":"网易":"腾讯系"),1)])),_:1})])),_:1}),u(w,{class:"detailItem"},{default:l((()=>[u(q,{class:"detailLabel"},{default:l((()=>[o("语言：")])),_:1}),u(q,{class:"detailValue"},{default:l((()=>[o(n(y.musicDetail.language||"未知"),1)])),_:1})])),_:1}),u(w,{class:"detailItem"},{default:l((()=>[u(q,{class:"detailLabel"},{default:l((()=>[o("音乐类型：")])),_:1}),u(q,{class:"detailValue"},{default:l((()=>[o(n(y.musicDetail.music_type||"未知"),1)])),_:1})])),_:1}),u(w,{class:"detailItem"},{default:l((()=>[u(q,{class:"detailLabel"},{default:l((()=>[o("有无PV&MV：")])),_:1}),u(q,{class:"detailValue"},{default:l((()=>[o(n(y.musicDetail.pv_mv?y.musicDetail.pv_mv:"无"),1)])),_:1})])),_:1})])),_:1}),y.musicDetail.staff&&y.musicDetail.staff.length>0?(c(),s(w,{key:0,class:"detailSection"},{default:l((()=>[u(q,{class:"sectionTitle"},{default:l((()=>[o("制作人员")])),_:1}),(c(!0),m(f,null,d(y.musicDetail.staff,(t=>(c(),s(w,{class:"detailItem",key:t.type},{default:l((()=>[u(q,{class:"detailLabel"},{default:l((()=>[o(n(t.type)+"：",1)])),_:2},1024),u(q,{class:"detailValue"},{default:l((()=>[o(n(t.name),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):r("",!0),y.musicDetail.note?(c(),s(w,{key:1,class:"detailSection"},{default:l((()=>[u(q,{class:"sectionTitle"},{default:l((()=>[o("备注")])),_:1}),u(q,{class:"detailNote"},{default:l((()=>[o(n(y.musicDetail.note),1)])),_:1})])),_:1})):r("",!0),u(w,{class:"detailSection"},{default:l((()=>[u(q,{class:"sectionTitle"},{default:l((()=>[o("发布日期")])),_:1}),u(q,{class:"detailDate"},{default:l((()=>[o(n(g.formatDate(y.musicDetail.publish_time)),1)])),_:1})])),_:1})])),_:1}),u(w,{class:p(["playButtons",{"single-button":!g.hasMultipleButtons}])},{default:l((()=>[y.musicDetail.platform&&y.musicDetail.platform.netease?(c(),s(w,{key:0,class:"playButton",onClick:g.turnToNetease},{default:l((()=>[u(T,{src:"/R-Mobile_Pages/assets/netease-D9urGBuq.png",class:"playIcon"}),u(q,{class:"playText"},{default:l((()=>[o("网易云音乐")])),_:1})])),_:1},8,["onClick"])):r("",!0),y.musicDetail.platform&&y.musicDetail.platform.qq_music?(c(),s(w,{key:1,class:"playButton",onClick:g.turnToQQMusic},{default:l((()=>[u(T,{src:"/R-Mobile_Pages/assets/qqmusic-U0PToMQ4.png",class:"playIcon"}),u(q,{class:"playText"},{default:l((()=>[o("QQ音乐")])),_:1})])),_:1},8,["onClick"])):r("",!0)])),_:1},8,["class"])])),_:1})):(c(),s(w,{key:0,class:"loading"},{default:l((()=>[u(q,null,{default:l((()=>[o("加载中...")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-5dd43d0d"]]);export{g as default};
