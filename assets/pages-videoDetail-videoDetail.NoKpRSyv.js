import{o as i,c as e,w as t,a as o,n as s,i as a,b as l,E as n,s as r,j as c,q as d,x as f,y as h,h as m,A as u}from"./index-CQZovXBN.js";import{g as p,I as A}from"./runtime.CoBkiQaE.js";import{_ as b,w}from"./api.BbjEcOtK.js";import{r as I}from"./uni-app.es.Bvjx594B.js";const v=b(p("i-arrow-right",A("i-arrow-right",(i=>'<?xml version="1.0" encoding="UTF-8"?><svg width="'+i.sizeWithUnit+'" height="'+i.sizeWithUnit+'" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M41.9999 24H5.99994" stroke="'+i.colors[0]+'" stroke-width="'+i.strokeWidth+'" stroke-linecap="'+i.strokeLinecap+'" stroke-linejoin="'+i.strokeLinejoin+'"/><path d="M30 12L42 24L30 36" stroke="'+i.colors[0]+'" stroke-width="'+i.strokeWidth+'" stroke-linecap="'+i.strokeLinecap+'" stroke-linejoin="'+i.strokeLinejoin+'"/></svg>'))),[["render",function(n,r,c,d,f,h){const m=a,u=l;return i(),e(u,{class:"a-icon-svg",style:s([n.boxStyle])},{default:t((()=>[o(m,{class:"a-icon-pack-image",src:n.url,mode:"aspectFit"},null,8,["src"])])),_:1},8,["style"])}],["__scopeId","data-v-f33e4b91"]]);const g=b({data:()=>({id:"",videoInfo:{},hasBilibili:!1,hasWeibo:!1,hasWeixin:!1,hasAnyPlatform:!1}),onLoad(i){const{id:e}=i;this.id=e,e?this.loadVideoDetail(e):n({title:"缺少视频ID",icon:"none"})},methods:{async loadVideoDetail(i){try{r({title:"加载中...",mask:!0}),this.videoInfo=await w(i),this.checkPlatforms()}catch(e){n({title:"加载失败",icon:"none"})}finally{c()}},checkPlatforms(){this.videoInfo.sources&&(this.hasBilibili=this.videoInfo.sources.some((i=>"bilibili"===i.platform)),this.hasWeibo=this.videoInfo.sources.some((i=>"weibo"===i.platform)),this.hasWeixin=this.videoInfo.sources.some((i=>"weixin"===i.platform)),this.hasAnyPlatform=this.hasBilibili||this.hasWeibo||this.hasWeixin)},playVideo(){this.hasBilibili?this.goToBilibili():this.hasWeixin?this.goToWeixin():this.hasWeibo&&this.goToWeibo()},goToBilibili(){const i=this.videoInfo.sources.find((i=>"bilibili"===i.platform));i&&(window.open(`bilibili://video/${i.bvid}`),window.location.href!==`bilibili://video/${i.bvid}`&&window.open(`https://www.bilibili.com/video/${i.bvid}`))},goToWeibo(){const i=this.videoInfo.sources.find((i=>"weibo"===i.platform));i&&(window.open(`sinaweibo://detail?mblogid=${i.mid}`),window.location.href!==`sinaweibo://detail?mblogid=${i.mid}`&&window.open(`https://m.weibo.cn/detail/${i.mid}`))},goToWeixin(){this.videoInfo.sources.find((i=>"weixin"===i.platform))&&n({title:"不支持网页跳转，请移步微博查看或使用小程序跳转",icon:"error"})},formatDate(i){if(!i)return"";let e;if("string"==typeof i)if(i.includes("T")||i.includes("Z"))e=new Date(i);else{const t=i.replace(/-/g,"/");e=new Date(t)}else e=new Date(i);if(isNaN(e.getTime()))return i||"";return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},formatDuration(i){if(!i)return"";const e=Math.floor(i/60),t=i%60;if(e>=60){return`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}:${String(t).padStart(2,"0")}`}return`${e}:${String(t).padStart(2,"0")}`}},onShareAppMessage(i){return{title:"亲爱的瑞秋-"+this.videoInfo.name,path:"/pages/videoDetail/videoDetail?id="+this.id}},onShareTimeline(){return{title:"亲爱的瑞秋-"+this.videoInfo.name,query:"id="+this.id}}},[["render",function(s,n,r,c,p,A){const b=u,w=l,g=a,k=I(d("i-arrow-right"),v);return i(),e(w,{class:"container"},{default:t((()=>[p.videoInfo&&p.videoInfo.name?(i(),e(w,{key:1},{default:t((()=>[o(w,{class:"videoCover"},{default:t((()=>{var i;return[o(g,{src:null==(i=p.videoInfo.cover_url)?void 0:i.replace("http://","https://"),mode:"widthFix",class:"coverImage"},null,8,["src"])]})),_:1}),o(w,{class:"videoInfo"},{default:t((()=>[o(b,{class:"videoTitle"},{default:t((()=>[f(h(p.videoInfo.name),1)])),_:1}),o(w,{class:"videoMeta"},{default:t((()=>[o(b,{class:"publishTime"},{default:t((()=>[f(h(A.formatDate(p.videoInfo.publish_time)),1)])),_:1}),o(b,{class:"videoType"},{default:t((()=>[f(h(p.videoInfo.type),1)])),_:1}),o(b,{class:"duration"},{default:t((()=>[f(h(A.formatDuration(p.videoInfo.duration)),1)])),_:1})])),_:1})])),_:1}),o(w,{class:"platformButtons"},{default:t((()=>[o(w,{class:"sectionTitle"},{default:t((()=>[f("观看平台")])),_:1}),p.hasBilibili?(i(),e(w,{key:0,class:"platformButton bilibili",onClick:A.goToBilibili},{default:t((()=>[o(w,{class:"platformIcon"},{default:t((()=>[o(g,{src:"/R-Mobile_Pages/assets/bilibili-B4f0lnyN.ico",class:"iconImage"})])),_:1}),o(w,{class:"platformInfo"},{default:t((()=>[o(b,{class:"platformName"},{default:t((()=>[f("Bilibili")])),_:1}),o(b,{class:"platformDesc"},{default:t((()=>[f("在Bilibili观看")])),_:1})])),_:1}),o(k,{theme:"outline",size:"24",fill:"#76a5c3"})])),_:1},8,["onClick"])):m("",!0),p.hasWeibo?(i(),e(w,{key:1,class:"platformButton weibo",onClick:A.goToWeibo},{default:t((()=>[o(w,{class:"platformIcon"},{default:t((()=>[o(g,{src:"/R-Mobile_Pages/assets/weibo-DpbHXl4N.ico",class:"iconImage"})])),_:1}),o(w,{class:"platformInfo"},{default:t((()=>[o(b,{class:"platformName"},{default:t((()=>[f("微博")])),_:1}),o(b,{class:"platformDesc"},{default:t((()=>[f("在微博视频号观看")])),_:1})])),_:1}),o(k,{theme:"outline",size:"24",fill:"#76a5c3"})])),_:1},8,["onClick"])):m("",!0),p.hasWeixin?(i(),e(w,{key:2,class:"platformButton weixin",onClick:A.goToWeixin},{default:t((()=>[o(w,{class:"platformIcon"},{default:t((()=>[o(g,{src:"data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAN6SURBVHgB7VZNUhNBFH6vJxl0NzdwvEHcWYBFOAFwApMC3IInIJwA2ao44QTEExhKoNyJJ3C8QXZiJtPP15Oe7p5JD6Au5VWl0tP9fr732w3wQP87YX3jZ/I8RhlsCqBJW4Rj7I9T+AeipBtlcropAaMl0R7V9VUATN8udyDAT7yM9FYqSLxu7XwewV/Q7P2LTYkycfRNIKf18NXVdckjKhIBnjnMimJWcDb7sPIS/tQ4yyjZmr4IWnjk8hkAhfdsUH+mRHBankmCofIG7mtcec4yZoPwmGM995qgy2mJFwBgWxikBHi6tHPZI4mHBgSH0hVsIlVDOuxzXawj3LnYJ8KP5d4U8s4CAJIyNmAAU/W/tHsxKNDPKcooO1NFdRuAQAa2hli20FHolKnRL21ahE+JBGkY2kFr4ISvk0F2AA2UJcvqLNafqfLc6kQbYcHFWAeAQqRm7TBz20xyzLcAtJCE/ezdarduXIWewz3Qn9zC7XX33NUpZrQIYAaz1DLTE1f4cf9LyoYPrQeUQI106OcYmXdhfiDFRr4lFwEURiyCTt1AuHv5hvfH+jP+dbI6KM8qoUccP1K8NeKBY5wK+3YOtGp8aaGITB4rxKnoBxR85WXEUdrjghzewA04oYc2tvo+WVU/Gsm1u10pQkI418vI13IqStyiblckHHpTlKrlfKNbz5iiBqSkH80AyKLLZN4FD4WipcKbzgVA8fT0UVq2XJ2ECGLzwSlqBBBItOFB6nh0FV2BEj1hpkNoIB5MG14bdQDt3YsxlO1GtNGksOCzBVl4FW5fDaGZuvp/om34AcyVmTTETaNX9XylUIk6TRPSvWMk0Xn9fAEAXyJ2ZstZz6e0BcEeQKVTIubd9/HKALvGGMLoTgD8aBiWa8TFNMwnHpTGJvqnhteB9rZuYK9cqweO57xKqshMftXsd8auCrM78bjtjt0Jqd4TbiqypJCNtTfe15X3MsLcXsMUkOnzqZwm4Fw2qu3qEzKT2ZEFSPYhQ/LUawsaaHqy8r00RtxiiLim+74wri6b0iOVFo5MMSE1/4gVcy1heWek4fblU58dAY1k+5pvsgPHuHrXbbnhLO4RfuuBqQfcdIzDbTOiEYDqa/dZpimtPyoNP+/lIn8G5ZQ0tvH4thnRmIKSpifLPWZbkwDfVIcURXpPGbZ+fseAeqAHgt/945mDxFqyBwAAAABJRU5ErkJggg==",class:"iconImage"})])),_:1}),o(w,{class:"platformInfo"},{default:t((()=>[o(b,{class:"platformName"},{default:t((()=>[f("视频号")])),_:1}),o(b,{class:"platformDesc"},{default:t((()=>[f("在视频号观看")])),_:1})])),_:1}),o(k,{theme:"outline",size:"24",fill:"#76a5c3"})])),_:1},8,["onClick"])):m("",!0),p.hasAnyPlatform?m("",!0):(i(),e(w,{key:3,class:"noPlatform"},{default:t((()=>[o(b,{class:"noPlatformText"},{default:t((()=>[f("暂无可用观看平台")])),_:1})])),_:1}))])),_:1}),o(w,{class:"videoDescription"},{default:t((()=>[o(w,{class:"sectionTitle"},{default:t((()=>[f("视频简介")])),_:1}),o(b,{class:"descriptionText"},{default:t((()=>[f(h(p.videoInfo.name),1)])),_:1})])),_:1})])),_:1})):(i(),e(w,{key:0,class:"loading"},{default:t((()=>[o(b,null,{default:t((()=>[f("加载中...")])),_:1})])),_:1}))])),_:1})}],["__scopeId","data-v-203037b0"]]);export{g as default};
