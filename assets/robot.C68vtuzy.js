import{d as t,R as e,o as a,c as i,w as l,t as o,z as s,r as n,e as h,x as r,y as d,n as A,f as g,b as c}from"./index-CQZovXBN.js";import{_ as f}from"./api.BbjEcOtK.js";const p=f({name:"duiFloatBall",emits:["touchFunc"],props:{dragable:{type:Boolean,default:!0},ballWidth:{type:String,default:"100rpx"},ballText:String,ballTextColor:{type:String,default:"#fff"},ballTextSize:{type:String,default:"28rpx"},background:String,position:{type:Object,default:function(){return{left:0,top:"50%"}}},immediateIndent:{type:Boolean,default:!0},needNearEdge:{type:Boolean,default:!0},nearEdgeDirection:String,nearEdgeTransition:{type:String,default:"all ease 0.3s"},nearEdgeIndent:{type:Boolean,default:!0},nearEdgeIndentDelay:{type:Number,default:1e3},nearEdgeIndentDistance:{type:Number,default:30},slotsDirection:{type:String,default:""}},data:()=>({slotsDirectionData:"right",touchType:0,starX:0,starY:0,floatBallPositionLeft:0,floatBallPositionTop:0,floatBallWidth:0,floatBallHeight:0,windowWidth:0,windowHeight:0,floatBallWrapperStyle:{left:0,top:0,transform:""},left:0,top:0,indentTimer:null,indentNearEdgeTimer:null,totalTranslateX:0,totalTranslateY:0}),methods:{touchstart(t){const e=t.touches[0].clientX,a=t.touches[0].clientY;t.preventDefault(),this.clearAllTimeout(),this.floatBallWrapperStyle.transition="none",this.touchType=0,this.starX=e,this.starY=a},touchmove(t){const e=t.touches[0].clientX,a=t.touches[0].clientY,i=e-this.starX,l=a-this.starY;(Math.abs(i)>10||Math.abs(l)>10)&&(this.touchType=1),this.validMove(i,l)},touchend(t){const e=t.changedTouches[0].clientX,a=t.changedTouches[0].clientY,i=e-this.starX,l=a-this.starY,{translateX:o,translateY:s}=this.calcTranslateXY(i,l);0===this.touchType&&this.touchCallBackFunc(),this.totalTranslateX=o,this.totalTranslateY=s,this.needNearEdge&&this.getFloatBallLatestRect().then((t=>{let e="",a={left:t.left,top:t.top,right:this.windowWidth-t.left-this.floatBallWidth,bottom:this.windowHeight-t.top-this.floatBallHeight};if(this.totalTranslateX,this.totalTranslateY,this.nearEdgeDirection)e=this.nearEdgeDirection;else{let t=Math.min();for(const i in a){const l=parseFloat(a[i]);l<t&&(t=l,e=i)}}this.setNearEdgeAndIndent(e),this.nearEdgeIndent&&(0!==this.nearEdgeIndentDelay?(clearTimeout(this.indentNearEdgeTimer),this.indentNearEdgeTimer=setTimeout((()=>{this.setNearEdgeAndIndent(e,this.nearEdgeIndentDistance)}),this.nearEdgeIndentDelay)):this.setNearEdgeAndIndent(e,this.nearEdgeIndentDistance)),this.setSlotsDirection(e)}))},touchCallBackFunc(){this.getFloatBallLatestRect().then((t=>{const{right:e,bottom:a,top:i,left:l}=t;let o=!1;(Math.ceil(e)>=this.windowWidth||Math.floor(i)<=0)&&(o=!0),(Math.ceil(a)>=this.windowHeight||Math.floor(l)<=0)&&(o=!0),this.$emit("touchFunc",{iSNearEdge:o})}))},validMove(t,e){const{translateX:a,translateY:i}=this.calcTranslateXY(t,e);this.floatBallWrapperStyle.transform=`translate(${a}px,${i}px)`},calcTranslateXY(t,e){let a=this.totalTranslateX+t,i=this.totalTranslateY+e;return this.floatBallPositionLeft+a<0&&(a=-this.floatBallPositionLeft),this.floatBallPositionLeft+a+this.floatBallWidth>this.windowWidth&&(a=this.windowWidth-this.floatBallWidth-this.floatBallPositionLeft),this.floatBallPositionTop+i<0&&(i=-this.floatBallPositionTop),this.floatBallPositionTop+i+this.floatBallHeight>this.windowHeight&&(i=this.windowHeight-this.floatBallHeight-this.floatBallPositionTop),{translateX:a,translateY:i}},setNearEdgeAndIndent(t,e=0){let a=this.totalTranslateX,i=this.totalTranslateY;switch(e<0?e=0:e<=1&&(e=this.floatBallWidth*e),t){case"left":a=-this.floatBallPositionLeft-e;break;case"right":a=this.windowWidth-this.floatBallWidth-this.floatBallPositionLeft+e;break;case"top":i=-this.floatBallPositionTop-e;break;case"bottom":i=this.windowHeight-this.floatBallHeight-this.floatBallPositionTop+e}this.nearEdgeTransition&&(this.floatBallWrapperStyle.transition=this.nearEdgeTransition),this.totalTranslateX=a,this.totalTranslateY=i,this.floatBallWrapperStyle.transform=`translate(${a}px,${i}px)`},setSlotsDirection(t){let e="";switch(t){case"left":e="right";break;case"right":e="left";break;case"top":e="bottom";break;case"bottom":e="top"}this.slotsDirection?this.slotsDirectionData=this.slotsDirection:this.slotsDirectionData=e},clearAllTimeout(){clearTimeout(this.indentTimer),clearTimeout(this.indentNearEdgeTimer)},setIndent(t){this.clearAllTimeout(),this.indentTimer=setTimeout((()=>{this.setNearEdgeAndIndent(t,this.nearEdgeIndentDistance)}),this.nearEdgeIndentDelay)},setFloatBallWH(){t().in(this).select("#floatBallWrapper").boundingClientRect((t=>{this.floatBallWidth=t.width,this.floatBallHeight=t.height,this.floatBallPositionLeft=t.left,this.floatBallPositionTop=t.top,this.initSet()})).exec()},getFloatBallLatestRect(){return new Promise(((e,a)=>{t().in(this).select("#floatBallWrapper").boundingClientRect((t=>{e(t)})).exec()}))},setWindowWH(){let t={};t=e(),this.windowWidth=t.windowWidth,this.windowHeight=t.windowHeight},initSet(){let t="top",e="",a="";"100%"==this.position.left?(t="right",e=-this.floatBallWidth,this.floatBallWrapperStyle.transform=`translateX(${e}px)`,this.totalTranslateX=e):t="left","100%"==this.position.top&&(t="bottom",a=-this.floatBallHeight,this.floatBallWrapperStyle.top=this.windowHeight+"px",this.floatBallWrapperStyle.transform=`translateY(${a}px)`,this.totalTranslateY=a,this.floatBallPositionTop=this.windowHeight),this.setSlotsDirection(t),this.immediateIndent&&this.nearEdgeIndent&&this.setIndent(t)},onSlotClick(t){this.$emit("slotClick",t)}},created(){this.floatBallWrapperStyle.top=this.position.top,this.floatBallWrapperStyle.left=this.position.left,"number"!=typeof this.nearEdgeIndentDistance&&console.error("nearEdgeIndentDistance值必须为number类型")},mounted(){this.setWindowWH(),this.setFloatBallWH()},beforeDestroy(){this.clearAllTimeout()}},[["render",function(t,e,f,p,B,E){const u=c;return a(),i(u,{class:"float-ball-wrapper",id:"floatBallWrapper",style:A([B.floatBallWrapperStyle])},{default:l((()=>[f.dragable?(a(),o("div",{key:0,class:"float-ball",style:A({background:f.background,color:f.ballTextColor,fontSize:f.ballTextSize}),onTouchstart:e[1]||(e[1]=(...t)=>E.touchstart&&E.touchstart(...t)),onTouchmove:e[2]||(e[2]=g(((...t)=>E.touchmove&&E.touchmove(...t)),["stop"])),onTouchend:e[3]||(e[3]=(...t)=>E.touchend&&E.touchend(...t))},[s("div",{class:h(["slots",[B.slotsDirectionData]]),onClick:e[0]||(e[0]=(...t)=>E.onSlotClick&&E.onSlotClick(...t))},[n(t.$slots,"default",{},void 0,!0)],2),r(" "+d(f.ballText),1)],36)):(a(),o("div",{key:1,class:"float-ball"},[s("div",{class:h(["slots",[B.slotsDirectionData]]),onClick:e[4]||(e[4]=(...t)=>E.onSlotClick&&E.onSlotClick(...t))},[n(t.$slots,"default",{},void 0,!0)],2)]))])),_:3},8,["style"])}],["__scopeId","data-v-563d1f6e"]]),B="data:image/png;base64,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",E="/R-Mobile_Pages/assets/robot-UGfXMHM4.png";export{B as _,E as a,p as d};
